{% extends "layout.html" %}
{% block title %}User Management â€” Admin{% endblock %}
{% block content %}

<h3 class="fw-bold mb-4">User Management</h3>

<div class="row">
    {% for u in users %}
    <div class="col-md-4 col-12 mb-3">
        <div class="card shadow-sm h-100">
            <div class="card-body">

                <h5 class="card-title mb-1">{{ u.full_name }}</h5>
                <span class="badge bg-dark">{{ u.role|capitalize }}</span>

                <p class="mt-3 mb-1"><b>Phone:</b> {{ u.phone }}</p>
                <p class="mb-3"><b>Email:</b> {{ u.email }}</p>
                {% if u.is_rider_requested and u.role == "customer" %}
                    <p class="mb-3 text-warning"><b>Rider Access Requested</b></p>
                {% endif %}

                <!-- Opt-for-Rider Button -->
                {% if u.role == "customer" %}
                    <a href="{{ url_for('admin_make_rider', user_id=u.id) }}"
                       class="btn btn-sm btn-success w-100">Opt for Rider</a>
                {% elif u.role == "rider" %}
                    <a href="{{ url_for('admin_remove_rider', user_id=u.id) }}"
                       class="btn btn-sm btn-warning w-100">Remove Rider Access</a>
                {% endif %}

            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
